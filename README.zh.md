# MCPRouter - MCP è·¯ç”±å™¨

åŸºäº Tauriã€React å’Œ TypeScript æ„å»ºçš„ç°ä»£ MCPï¼ˆModel Context Protocolï¼‰è·¯ç”±å™¨ï¼Œæä¾›å…¨é¢çš„ MCP æœåŠ¡å™¨ç®¡ç†ã€å¸‚åœºé›†æˆå’Œæ™ºèƒ½è¯·æ±‚è·¯ç”±åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ **é«˜æ€§èƒ½**

- å¤šä¼ è¾“åè®®æ”¯æŒï¼ˆstdioã€SSEã€HTTPï¼‰
- å¼‚æ­¥æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
- å®æ—¶è¿æ¥ç›‘æ§å’Œå¥åº·æ£€æŸ¥
- è‡ªåŠ¨æœåŠ¡é‡è¿å’Œæ•…éšœæ¢å¤

### ğŸ” **å¸‚åœºé›†æˆ**

- æµè§ˆå’Œæœç´¢æ¥è‡ªå¤šä¸ªæä¾›å•†çš„ MCP æœåŠ¡
- ä¸€é”®å®‰è£…ï¼Œè‡ªåŠ¨é…ç½®
- æŸ¥çœ‹æœåŠ¡è¯¦æƒ…ã€æ–‡æ¡£å’Œç³»ç»Ÿè¦æ±‚
- æ”¯æŒ ModelScope ç­‰ MCP æ³¨å†Œä¸­å¿ƒ

### ğŸ“Š **æ™ºèƒ½ä»ªè¡¨æ¿**

- å®æ—¶ç³»ç»Ÿç»Ÿè®¡å’Œå¥åº·ç›‘æ§
- æ´»è·ƒè¿æ¥å’ŒæœåŠ¡å™¨çŠ¶æ€è·Ÿè¸ª
- å¯åŠ¨æ—¶é—´å’Œæ€§èƒ½æŒ‡æ ‡
- å¯è§†åŒ–æœåŠ¡çŠ¶æ€æŒ‡ç¤ºå™¨

### ğŸ¯ **å…¨é¢ç®¡ç†**

- æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆå¯åŠ¨/åœæ­¢/é‡å¯ï¼‰
- å·¥å…·ã€èµ„æºå’Œæç¤ºçš„å‘ç°ä¸ç®¡ç†
- é…ç½®å¯¼å…¥/å¯¼å‡ºå’Œè¿ç§»
- æ‰¹é‡æœåŠ¡ç®¡ç†æ“ä½œ

### ğŸ›¡ï¸ **ç³»ç»Ÿé›†æˆ**

- åŸç”Ÿç³»ç»Ÿæ‰˜ç›˜,å¿«é€Ÿè®¿é—®èœå•
- è‡ªå¯åŠ¨å’Œåå°æœåŠ¡æ”¯æŒ
- å¤šä¸»é¢˜æ”¯æŒï¼ˆè‡ªåŠ¨/äº®è‰²/æš—è‰²ï¼‰
- å¹³å°ç‰¹å®šä¼˜åŒ–ï¼ˆmacOSã€Windowsã€Linuxï¼‰

### ğŸ” **è®¤è¯ä¸å®‰å…¨**

- èšåˆå™¨ç«¯ç‚¹çš„å¯é€‰ Bearer token è®¤è¯
- é€šè¿‡ `server.auth` é…ç½®é¡¹æ§åˆ¶è®¤è¯
- é˜²æ—¶åºæ”»å‡»çš„å¸¸é‡æ—¶é—´ token æ¯”è¾ƒ
- å®‰å…¨é…ç½®éªŒè¯å’Œå¼± token è­¦å‘Š
- å®Œå…¨å‘åå…¼å®¹ï¼ˆé»˜è®¤ç¦ç”¨è®¤è¯ï¼‰

### ğŸ“ **çµæ´»é…ç½®**

- çµæ´»çš„é…ç½®ç®¡ç†
- ç¯å¢ƒå˜é‡æ”¯æŒ
- ç½‘ç»œæ¥å£å’Œ IP åœ°å€ç®¡ç†
- æ—¥å¿—è®°å½•å’Œè°ƒè¯•æ”¯æŒ

## å¿«é€Ÿå¼€å§‹

1. **å®‰è£…ä¾èµ–**ï¼š`pnpm install`
2. **å¼€å‘æ¨¡å¼**ï¼š`pnpm tauri dev`
3. **æ„å»ºç”Ÿäº§ç‰ˆ**ï¼š`pnpm tauri build`

## æ¨è IDE é…ç½®

- [VS Code](https://code.visualstudio.com/) + [Tauri](https://marketplace.visualstudio.com/items?itemName=tauri-apps.tauri-vscode) + [rust-analyzer](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer)

## æ¶æ„

### åç«¯ï¼ˆRust/Tauriï¼‰

```text
src-tauri/src/
â”œâ”€â”€ main.rs              # åº”ç”¨ç¨‹åºå…¥å£
â”œâ”€â”€ lib.rs               # Tauri å‘½ä»¤æ³¨å†Œå’Œå…¨å±€çŠ¶æ€
â”œâ”€â”€ commands/            # Tauri å‘½ä»¤å¤„ç†å™¨
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ config.rs        # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ dashboard.rs     # ä»ªè¡¨æ¿ç»Ÿè®¡
â”‚   â”œâ”€â”€ marketplace.rs   # å¸‚åœºé›†æˆ
â”‚   â”œâ”€â”€ mcp_server.rs    # MCP æœåŠ¡å™¨æ“ä½œ
â”‚   â”œâ”€â”€ settings.rs      # ç³»ç»Ÿè®¾ç½®
â”‚   â””â”€â”€ tool.rs          # å·¥å…·ç®¡ç†
â”œâ”€â”€ config/              # é…ç½®å±‚
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ file_manager.rs  # é…ç½®æ–‡ä»¶ I/O
â”‚   â””â”€â”€ mcp_server_config.rs  # æœåŠ¡å™¨é…ç½®æ¨¡å‹
â”œâ”€â”€ mcp_manager.rs       # MCP æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†
â”œâ”€â”€ mcp_client.rs        # MCP å®¢æˆ·ç«¯è¿æ¥å¤„ç†
â”œâ”€â”€ aggregator.rs        # è¯·æ±‚è·¯ç”±å’Œèšåˆ
â”œâ”€â”€ marketplace/         # å¸‚åœºæä¾›å•†
â”‚   â”œâ”€â”€ mod.rs
â”‚   â””â”€â”€ providers/
â”‚       â”œâ”€â”€ mod.rs
â”‚       â””â”€â”€ modelscope.rs  # ModelScope æä¾›å•†
â”œâ”€â”€ types.rs             # å…±äº«ç±»å‹å®šä¹‰
â””â”€â”€ error.rs             # é”™è¯¯å¤„ç†
```

### å‰ç«¯ï¼ˆReact/TypeScriptï¼‰

```text
src/
â”œâ”€â”€ components/          # å¯å¤ç”¨ UI ç»„ä»¶
â”‚   â”œâ”€â”€ ErrorBoundary.tsx      # é”™è¯¯è¾¹ç•ŒåŒ…è£…å™¨
â”‚   â”œâ”€â”€ Layout.tsx             # ä¸»å¸ƒå±€åŒ…è£…å™¨
â”‚   â”œâ”€â”€ ServiceDetail.tsx      # æœåŠ¡å™¨è¯¦æƒ…è§†å›¾
â”‚   â”œâ”€â”€ ToolManager.tsx        # å·¥å…·ç®¡ç†ç•Œé¢
â”‚   â”œâ”€â”€ InstallConfirmModal.tsx # å®‰è£…ç¡®è®¤å¯¹è¯æ¡†
â”‚   â””â”€â”€ AboutModal.tsx         # å…³äºå¯¹è¯æ¡†
â”œâ”€â”€ pages/               # ä¸»åº”ç”¨é¡µé¢
â”‚   â”œâ”€â”€ Dashboard.tsx          # ç³»ç»Ÿä»ªè¡¨æ¿å’Œç»Ÿè®¡
â”‚   â”œâ”€â”€ McpServerManager.tsx   # MCP æœåŠ¡å™¨ç®¡ç†
â”‚   â”œâ”€â”€ Marketplace.tsx        # å¸‚åœºæµè§ˆå™¨
â”‚   â””â”€â”€ Settings.tsx           # åº”ç”¨è®¾ç½®
â”œâ”€â”€ services/            # API æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.ts                  # Tauri API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ config-service.ts       # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ dashboard-service.ts    # ä»ªè¡¨æ¿ç»Ÿè®¡
â”‚   â”œâ”€â”€ marketplace-service.ts  # å¸‚åœºæ“ä½œ
â”‚   â”œâ”€â”€ mcp-server-service.ts   # æœåŠ¡å™¨ç®¡ç†
â”‚   â””â”€â”€ tool-service.ts         # å·¥å…·æ“ä½œ
â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ theme/               # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ antd-config.ts
â””â”€â”€ vite-env.d.ts        # Vite ç¯å¢ƒç±»å‹
```

### æ ¸å¿ƒåŠŸèƒ½

- **ä»ªè¡¨æ¿åˆ†æ**ï¼šå®æ—¶ç³»ç»Ÿç»Ÿè®¡ã€æ´»è·ƒè¿æ¥å’Œå¥åº·ç›‘æ§
- **å¸‚åœºé›†æˆ**ï¼šæµè§ˆã€æœç´¢å’Œå®‰è£…æ¥è‡ªå¤šä¸ªæä¾›å•†çš„ MCP æœåŠ¡
- **æœåŠ¡å™¨ç®¡ç†**ï¼šå®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆåˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€é…ç½®ï¼‰
- **è‡ªåŠ¨å‘ç°**ï¼šè‡ªåŠ¨å‘ç°å·²è¿æ¥æœåŠ¡å™¨çš„å·¥å…·ã€èµ„æºå’Œæç¤º
- **é…ç½®ç®¡ç†**ï¼šåŸºäº JSON çš„çµæ´»é…ç½®ï¼Œæ”¯æŒå¯¼å…¥/å¯¼å‡º
- **ç³»ç»Ÿé›†æˆ**ï¼šåŸç”Ÿç³»ç»Ÿæ‰˜ç›˜ã€è‡ªå¯åŠ¨å’Œå¤šä¸»é¢˜æ”¯æŒ
- **ç½‘ç»œç®¡ç†**ï¼šæœ¬åœ° IP åœ°å€å‘ç°å’Œç½‘ç»œæ¥å£é…ç½®
- **ä¼ è¾“åè®®**ï¼šæ”¯æŒ stdioã€æœåŠ¡å™¨å‘é€äº‹ä»¶ï¼ˆSSEï¼‰å’Œ HTTP ä¼ è¾“

### é…ç½®æ¶æ„

MCPRouter ä½¿ç”¨çµæ´»çš„åŸºäº JSON çš„é…ç½®ç³»ç»Ÿï¼Œå­˜å‚¨åœ¨ `~/.mcprouter/config.json`ï¼š

- **æœåŠ¡å™¨é…ç½®**ï¼šä¸»æœºã€ç«¯å£ã€è¶…æ—¶ã€è¿æ¥é™åˆ¶å’Œå¯é€‰è®¤è¯
- **MCP æœåŠ¡å™¨**ï¼šé…ç½®çš„æœåŠ¡å™¨åˆ—è¡¨ï¼ŒåŒ…å«ä¼ è¾“ç±»å‹ã€å‘½ä»¤å’Œç¯å¢ƒå˜é‡
- **è®¾ç½®**ï¼šä¸»é¢˜ã€è‡ªå¯åŠ¨ã€ç³»ç»Ÿæ‰˜ç›˜å’Œæ³¨å†Œè¡¨é¦–é€‰é¡¹
- **æ—¥å¿—è®°å½•**ï¼šå¯é…ç½®çš„æ—¥å¿—çº§åˆ«å’Œæ–‡ä»¶è¾“å‡º

#### è®¤è¯é…ç½®

ä¸ºèšåˆå™¨ç«¯ç‚¹å¯ç”¨ Bearer token è®¤è¯ï¼š

```json
{
  "server": {
    "host": "127.0.0.1",
    "port": 8000,
    "max_connections": 100,
    "timeout_seconds": 30,
    "auth": true,
    "bearer_token": "your-secret-token-here"
  }
}
```

**å®‰å…¨æœ€ä½³å®è·µï¼š**

- ä½¿ç”¨åŠ å¯†éšæœº tokenï¼ˆæ¨è 32 ä¸ªä»¥ä¸Šå­—ç¬¦ï¼‰
- è®¾ç½®æ–‡ä»¶æƒé™ `chmod 600 ~/.mcprouter/config.json` ä¿æŠ¤ token
- å¯ç”¨è®¤è¯æ—¶ä½¿ç”¨ HTTPS æˆ–ä»…ç»‘å®šåˆ° localhost (`127.0.0.1`)
- Token åŒºåˆ†å¤§å°å†™ï¼Œä½¿ç”¨å¸¸é‡æ—¶é—´æ¯”è¾ƒéªŒè¯
- é»˜è®¤ç¦ç”¨è®¤è¯ï¼Œä¿æŒå‘åå…¼å®¹

**å®¢æˆ·ç«¯ä½¿ç”¨ï¼š**

```bash
# ä¸å¯ç”¨è®¤è¯ï¼ˆé»˜è®¤ï¼‰
curl http://127.0.0.1:8000/mcp

# å¯ç”¨è®¤è¯
curl -H "Authorization: Bearer your-secret-token-here" \
  http://127.0.0.1:8000/mcp
```

## å¼€å‘

### å‰ç½®è¦æ±‚

- [Rust](https://www.rust-lang.org/)ï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
- [Node.js](https://nodejs.org/)ï¼ˆv18 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰
- [pnpm](https://pnpm.io/)ï¼ˆæ¨èåŒ…ç®¡ç†å™¨ï¼‰
- [Tauri CLI](https://tauri.app/v1/guides/building/setup)

### è®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/your-org/mcprouter.git
cd mcprouter

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ï¼ˆåŒæ—¶è¿è¡Œ Rust å’Œ Web å¼€å‘æœåŠ¡å™¨ï¼‰
pnpm tauri dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm tauri build

# é¢„è§ˆç”Ÿäº§æ„å»º
pnpm tauri build && pnpm tauri build --debug
```

### å¯ç”¨è„šæœ¬

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev                    # ä»…å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
pnpm tauri dev             # å¯åŠ¨å®Œæ•´çš„ Tauri åº”ç”¨å’Œå¼€å‘æœåŠ¡å™¨

# æ„å»ºå‘½ä»¤
pnpm build                 # TypeScript æ„å»º + Vite æ„å»º
pnpm tauri build           # å®Œæ•´ç”Ÿäº§æ„å»ºï¼ˆåˆ›å»ºå®‰è£…ç¨‹åºï¼‰

# å®ç”¨å‘½ä»¤
pnpm preview               # é¢„è§ˆ Vite æ„å»º
```

### é¡¹ç›®ç»“æ„

é¡¹ç›®éµå¾ªæ¨¡å—åŒ–æ¶æ„ï¼š

- **`src-tauri/`**ï¼šä½¿ç”¨ Tauri æ¡†æ¶çš„ Rust åç«¯
- **`src/`**ï¼šReact + TypeScript å‰ç«¯
- **`src/components/`**ï¼šå¯å¤ç”¨ UI ç»„ä»¶
- **`src/pages/`**ï¼šä¸»åº”ç”¨è§†å›¾
- **`src/services/`**ï¼šåç«¯é€šä¿¡çš„ API æœåŠ¡å±‚
- **`src/types/`**ï¼šTypeScript ç±»å‹å®šä¹‰

### è°ƒè¯•

```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
# ç¼–è¾‘ src-tauri/tauri.conf.json å¹¶è®¾ç½®ï¼š
# "logging": { "level": "debug" }

# æŸ¥çœ‹æ—¥å¿—ï¼ˆmacOS/Linuxï¼‰
tail -f ~/.local/share/mcprouter/logs/mcprouter.log

# æŸ¥çœ‹æ—¥å¿—ï¼ˆWindowsï¼‰
type %LOCALAPPDATA%\mcprouter\logs\mcprouter.log
```

### è´¡çŒ®æŒ‡å—

1. Fork ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature-name`
3. è¿›è¡Œæ›´æ”¹å¹¶å……åˆ†æµ‹è¯•
4. ä½¿ç”¨æ¸…æ™°çš„æ¶ˆæ¯æäº¤ï¼š`git commit -m "feat: add new feature"`
5. æ¨é€åˆ°æ‚¨çš„ fork å¹¶æäº¤æ‹‰å–è¯·æ±‚

### æŠ€æœ¯æ ˆ

- **åç«¯**ï¼šRust 1.70+ã€Tauri 2.x
- **å‰ç«¯**ï¼šReact 19ã€TypeScript 5ã€Vite 7
- **UI**ï¼šAnt Design 5ã€Tailwind CSS 3
- **å›¾æ ‡**ï¼šLucide React
- **å¹³å°**ï¼šmacOSã€Windowsã€Linux
